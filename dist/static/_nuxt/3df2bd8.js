(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{539:function(t,e,n){var content=n(624);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("8750fdec",content,!0,{sourceMap:!1})},623:function(t,e,n){"use strict";n(539)},624:function(t,e,n){var r=n(27)(!1);r.push([t.i,".chart[data-v-35063d8e]{position:absolute;top:0;left:0;width:100%;height:100%}.ratio16-9[data-v-35063d8e]{padding-top:56.25%;width:100%;position:relative}",""]),t.exports=r},735:function(t,e,n){"use strict";n.r(e);n(11),n(8),n(18),n(6),n(19);var r=n(16),o=n(1),h=n(5);n(7),n(65),n(290),n(24),n(34);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d=n(0).a.extend({data:function(){return{chartConfig:{dividedNum:13,heights:[]},horizontalAxis:[1920,1925,1930,1935,1940,1944,1945,1946,1947,1948,1950,1955,1960,1965,1970,1975,1980,1985,1990,1995,2e3,2005,2010,2015,2016,2017,2018,2019],verticalAxis:[],data:{city:"",population:[]},index:2,canvas:{chart:null,context:null,width:0,height:0},timer:null}},created:function(){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data=t.population[t.lineChartIndex],t.verticalAxis=t.population[t.lineChartIndex].population;case 2:case"end":return e.stop()}}),e)})))()},computed:{horizontalAxisFilter:function(){return this.horizontalAxis.filter((function(t,i){return i>13}))},verticalAxisFilter:function(){return this.verticalAxis.filter((function(t,i){return i>13}))},windowSize:function(){return this.$store.getters.windowSize},population:function(){return this.$store.getters["city/population"]},lineChartIndex:function(){return this.$store.getters["city/lineChartIndex"]}},watch:{windowSize:{handler:function(){this.time?clearTimeout(this.timer):this.resetChart();var t=this;this.timer=setTimeout((function(){t.timer=null,t.makeChart()}),200)},immediate:!1},lineChartIndex:function(){this.resetChart(),this.makeChart()}},mounted:function(){this.init(),this.makeChart()},methods:{init:function(){this.canvas.chart=this.$refs.chart,this.canvas.context=this.canvas.chart.getContext("2d"),this.canvas.chart.width=10*this.canvas.chart.getBoundingClientRect().width,this.canvas.chart.height=10*this.canvas.chart.getBoundingClientRect().height,this.canvas.width=this.canvas.chart.getBoundingClientRect().width,this.canvas.height=this.canvas.chart.getBoundingClientRect().height},makeChart:function(){var canvas=this.canvas,t=canvas.context,e=canvas.width,n=10*canvas.height,r=n/this.chartConfig.dividedNum;t.save();var o={context:t,lineWidth:.015*e,fontSize:.216*e,fillStyle:"orange",textAlign:"right",textBaseline:"top"};this.setContext(o),t.fillText(this.data.city,.92*e,.05*r,2e3),this.makeHorizontalAxis(t,e,r),this.makeVerticalAxis(t,e,r),this.makeHorizontalAxisText(canvas),this.makeVerticalAxisText(canvas),this.makeDot(t,e,n),t.restore()},setContext:function(t){t.context.lineWidth=t.lineWidth;var e=t.fontSize;t.context.font="".concat(e,"px 'ＭＳ ゴシック'"),t.context.fillStyle=t.fillStyle,t.context.textAlign=t.textAlign,t.context.textBaseline=t.textBaseline},makeHorizontalAxis:function(t,e,n){for(var i=this.chartConfig.dividedNum-1;i>0;i--)t.strokeStyle="#cacaca",t.lineWidth=.015*e,t.moveTo(e,i*n),t.lineTo(9*e,i*n),t.stroke(),i<this.chartConfig.dividedNum&&i>0&&this.chartConfig.heights.push(i*n)},makeHorizontalAxisText:function(canvas){var t=canvas.context,e=canvas.width,n=canvas.height,r={context:t,lineWidth:.015*e,fontSize:.216*e,fillStyle:"orange",textAlign:"center",textBaseline:"top"};this.setContext(r);for(var o=[],i=0;i<this.horizontalAxisFilter.length;i+=8/this.horizontalAxisFilter.length)o.push(e+e*i);for(var h=0;h<this.horizontalAxisFilter.length;h++)t.fillText(this.horizontalAxisFilter[h],o[h],9.5*n,2e3);t.restore()},makeVerticalAxis:function(t,e,n){t.beginPath(),t.moveTo(e,n),t.lineTo(e,(this.chartConfig.dividedNum-1)*n),t.closePath(),t.stroke()},makeVerticalAxisText:function(canvas){var t=canvas.context,e=canvas.width,n={context:t,lineWidth:.015*e,fontSize:.216*e,fillStyle:"orange",textAlign:"right",textBaseline:"middle"};this.setContext(n);for(var r=this.chartMaxMin(),o=this.horizontalAxisDiff(),h=[],i=r.min-o;i<r.max+o+1;i+=o)h.push(10*Math.round(i/10));for(var c=this.chartConfig.heights.length-1;c>-1;c--)t.fillText(String(h[c]),e-e/10,this.chartConfig.heights[c],2e3);t.restore()},makeDot:function(t,e,n){for(var r=[],i=0;i<this.horizontalAxisFilter.length;i+=8/this.horizontalAxisFilter.length)r.push(e+e*i);var o={context:t,lineWidth:.03*e,fontSize:.216*e,fillStyle:"orange",textAlign:"right",textBaseline:"middle"};this.setContext(o),t.strokeStyle="orange";for(var h=this.chartMaxMin(),c=this.horizontalAxisDiff(),l=(this.chartConfig.dividedNum-2)*n/this.chartConfig.dividedNum,d=n/this.chartConfig.dividedNum/c,f=0;f<r.length;f++){var x=this.verticalAxisFilter[f]-h.min;t.beginPath(),t.arc(r[f],l-d*x,40,0,2*Math.PI,!0),t.fill(),f!==r.length&&(t.moveTo(r[f],l-d*x),t.lineTo(r[f+1],l-d*(this.verticalAxisFilter[f+1]-h.min))),t.stroke(),t.restore()}},chartMaxMin:function(){var t=this.verticalAxisFilter.reduce((function(a,b){return Math.max(a,b)})),e=this.verticalAxisFilter.reduce((function(a,b){return Math.min(a,b)})),n=String(t-e).length-3,r=Math.pow(10,n);return{max:Math.floor(t/r)*r,min:Math.floor(e/r)*r}},horizontalAxisDiff:function(){var t=this.chartMaxMin();return(t.max-t.min)/(this.chartConfig.dividedNum-4)},drawTriangle:function(){var t=this.canvas.chart;if(t.getContext){var e=t.getContext("2d");e.beginPath();var n=t.getBoundingClientRect().width,r=t.getBoundingClientRect().height;e.lineWidth=.069*n,e.moveTo(5.17*n,1.84*r),e.lineTo(7.76*n,9.19*r),e.lineTo(2.59*n,9.19*r),e.closePath(),e.stroke()}},next:function(){this.$store.commit("changeLineChartIndex",1),this.resetChart(),this.makeChart()},back:function(){this.$store.commit("changeLineChartIndex",-1),this.resetChart(),this.makeChart()},resetChart:function(){var canvas=this.canvas,t=canvas.context,e=10*canvas.width,n=10*canvas.height;t.clearRect(0,0,e,n),this.data=l(l({},this.data),this.population[this.lineChartIndex]),this.verticalAxis=[],this.verticalAxis=[].concat(Object(r.a)(this.verticalAxis),Object(r.a)(this.population[this.lineChartIndex].population)),this.chartConfig=l(l({},this.chartConfig),{heights:[]})}}}),f=(n(623),n(70)),component=Object(f.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"ratio16-9"},[e("canvas",{ref:"chart",staticClass:"chart"})])])}),[],!1,null,"35063d8e",null);e.default=component.exports}}]);