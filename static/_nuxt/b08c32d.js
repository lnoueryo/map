(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{435:function(t,e){t.exports=function(t){return Set.prototype.values.call(t)}},495:function(t,e,n){"use strict";var r=n(291),o=n(292);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},496:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(497);r({target:"Set",proto:!0,real:!0,forced:o},{addAll:function(){return c.apply(this,arguments)}})},497:function(t,e,n){"use strict";var r=n(10),o=n(49);t.exports=function(){for(var t=r(this),e=o(t.add),n=0,c=arguments.length;n<c;n++)e.call(t,arguments[n]);return t}},498:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(293);r({target:"Set",proto:!0,real:!0,forced:o},{deleteAll:function(){return c.apply(this,arguments)}})},499:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(91),m=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{difference:function(t){var e=l(this),n=new(d(e,c("Set")))(e),r=f(n.delete);return m(t,(function(t){r.call(n,t)})),n}})},500:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(50),f=n(435),d=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{every:function(t){var e=c(this),n=f(e),r=l(t,arguments.length>1?arguments[1]:void 0,3);return!d(n,(function(t,n){if(!r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},501:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(50),m=n(91),v=n(435),h=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{filter:function(t){var e=l(this),n=v(e),r=d(t,arguments.length>1?arguments[1]:void 0,3),o=new(m(e,c("Set"))),y=f(o.add);return h(n,(function(t){r(t,t,e)&&y.call(o,t)}),{IS_ITERATOR:!0}),o}})},502:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(50),f=n(435),d=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{find:function(t){var e=c(this),n=f(e),r=l(t,arguments.length>1?arguments[1]:void 0,3);return d(n,(function(t,n){if(r(t,t,e))return n(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},503:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(91),m=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{intersection:function(t){var e=l(this),n=new(d(e,c("Set"))),r=f(e.has),o=f(n.add);return m(t,(function(t){r.call(e,t)&&o.call(n,t)})),n}})},504:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(49),f=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:function(t){var e=c(this),n=l(e.has);return!f(t,(function(t,r){if(!0===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}})},505:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(171),m=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:function(t){var e=d(this),n=l(t),r=n.has;return"function"!=typeof r&&(n=new(c("Set"))(t),r=f(n.has)),!m(e,(function(t,e){if(!1===r.call(n,t))return e()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},506:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(49),f=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:function(t){var e=c(this),n=l(e.has);return!f(t,(function(t,r){if(!1===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}})},507:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(435),f=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{join:function(t){var e=c(this),n=l(e),r=void 0===t?",":String(t),o=[];return f(n,o.push,{that:o,IS_ITERATOR:!0}),o.join(r)}})},508:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(50),m=n(91),v=n(435),h=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{map:function(t){var e=l(this),n=v(e),r=d(t,arguments.length>1?arguments[1]:void 0,3),o=new(m(e,c("Set"))),y=f(o.add);return h(n,(function(t){y.call(o,r(t,t,e))}),{IS_ITERATOR:!0}),o}})},509:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(49),f=n(435),d=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{reduce:function(t){var e=c(this),n=f(e),r=arguments.length<2,o=r?void 0:arguments[1];if(l(t),d(n,(function(n){r?(r=!1,o=n):o=t(o,n,n,e)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return o}})},510:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(10),l=n(50),f=n(435),d=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{some:function(t){var e=c(this),n=f(e),r=l(t,arguments.length>1?arguments[1]:void 0,3);return d(n,(function(t,n){if(r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},511:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(91),m=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:function(t){var e=l(this),n=new(d(e,c("Set")))(e),r=f(n.delete),o=f(n.add);return m(t,(function(t){r.call(n,t)||o.call(n,t)})),n}})},512:function(t,e,n){"use strict";var r=n(4),o=n(25),c=n(52),l=n(10),f=n(49),d=n(91),m=n(48);r({target:"Set",proto:!0,real:!0,forced:o},{union:function(t){var e=l(this),n=new(d(e,c("Set")))(e);return m(t,f(n.add),{that:n}),n}})},513:function(t,e){for(var n="0123456789bcdefghjkmnpqrstuvwxyz",r={},i=0;i<n.length;i++)r[n.charAt(i)]=i;var o="auto",c=-90,l=90,f=-180,d=180,m=[0,5,7,8,11,12,13,15,16,17,18],v=function(t,e,r){if(r===o){if("number"==typeof t||"number"==typeof e)throw new Error("string notation required for auto precision.");var v=t.split(".")[1].length,h=e.split(".")[1].length,y=Math.max(v,h);r=m[y]}else void 0===r&&(r=9);for(var S,w=[],k=0,O=0,_=0,x=l,R=c,E=d,C=f;w.length<r;)if(O%2==0?e>(S=(E+C)/2)?(_=1+(_<<1),C=S):(_=0+(_<<1),E=S):t>(S=(x+R)/2)?(_=1+(_<<1),R=S):(_=0+(_<<1),x=S),O++,5===++k){var code=n[_];w.push(code),k=0,_=0}return w.join("")},h=function(t,e,n){n=n||52;for(var r,o=0,m=l,v=c,h=d,y=f,S=0;o<n;)S*=2,o%2==0?e>(r=(h+y)/2)?(S+=1,y=r):h=r:t>(r=(m+v)/2)?(S+=1,v=r):m=r,o++;return S},y=function(t){for(var e,n=!0,o=l,m=c,v=d,h=f,y=0,i=0,S=t.length;i<S;i++){var code=t[i].toLowerCase();y=r[code];for(var w=4;w>=0;w--){var k=y>>w&1;n?(e=(v+h)/2,1===k?h=e:v=e):(e=(o+m)/2,1===k?m=e:o=e),n=!n}}return[m,h,o,v]},S=function(t,e){for(var n=l,r=c,o=d,m=f,v=0,h=(e=e||52)/2,i=0;i<h;i++)v=w(t,2*(h-i)-1),0===w(t,2*(h-i)-2)?n=(n+r)/2:r=(n+r)/2,0===v?o=(o+m)/2:m=(o+m)/2;return[r,m,n,o]};function w(t,e){return t/Math.pow(2,e)&1}var k=function(t){var e=y(t),n=(e[0]+e[2])/2,r=(e[1]+e[3])/2;return{latitude:n,longitude:r,error:{latitude:e[2]-n,longitude:e[3]-r}}},O=function(t,e){var n=S(t,e),r=(n[0]+n[2])/2,o=(n[1]+n[3])/2;return{latitude:r,longitude:o,error:{latitude:n[2]-r,longitude:n[3]-o}}},_=function(t,e){var n=k(t),r=n.latitude+e[0]*n.error.latitude*2,o=n.longitude+e[1]*n.error.longitude*2;return o=R(o),r=E(r),v(r,o,t.length)},x=function(t,e,n){var r=O(t,n=n||52),o=r.latitude+e[0]*r.error.latitude*2,c=r.longitude+e[1]*r.error.longitude*2;return c=R(c),o=E(o),h(o,c,n)};function R(t){return t>d?f+t%d:t<f?d+t%d:t}function E(t){return t>l?l:t<c?c:t}var C={ENCODE_AUTO:o,encode:v,encode_uint64:h,encode_int:h,decode:k,decode_int:O,decode_uint64:O,decode_bbox:y,decode_bbox_uint64:S,decode_bbox_int:S,neighbor:_,neighbor_int:x,neighbors:function(t){var e,n,r=t.length,o=k(t),c=o.latitude,l=o.longitude,f=2*o.error.latitude,d=2*o.error.longitude;function m(t,o){return e=c+t*f,n=R(n=l+o*d),e=E(e),v(e,n,r)}return[m(1,0),m(1,1),m(0,1),m(-1,1),m(-1,0),m(-1,-1),m(0,-1),m(1,-1)]},neighbors_int:function(t,e){var n,r,o=O(t,e=e||52),c=o.latitude,l=o.longitude,f=2*o.error.latitude,d=2*o.error.longitude;function m(t,o){return n=c+t*f,r=R(r=l+o*d),n=E(n),h(n,r,e)}return[m(1,0),m(1,1),m(0,1),m(-1,1),m(-1,0),m(-1,-1),m(0,-1),m(1,-1)]},bboxes:function(t,e,n,r,o){for(var c=v(t,e,o=o||9),l=v(n,r,o),f=k(c),d=2*f.error.latitude,m=2*f.error.longitude,h=y(c),S=y(l),w=Math.round((S[0]-h[0])/d),O=Math.round((S[1]-h[1])/m),x=[],R=0;R<=w;R++)for(var E=0;E<=O;E++)x.push(_(c,[R,E]));return x},bboxes_int:function(t,e,n,r,o){for(var c=h(t,e,o=o||52),l=h(n,r,o),f=O(c,o),d=2*f.error.latitude,m=2*f.error.longitude,v=S(c,o),y=S(l,o),w=Math.round((y[0]-v[0])/d),k=Math.round((y[1]-v[1])/m),_=[],R=0;R<=w;R++)for(var E=0;E<=k;E++)_.push(x(c,[R,E],o));return _}};t.exports=C},594:function(t,e,n){var content=n(735);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("2fccda32",content,!0,{sourceMap:!1})},734:function(t,e,n){"use strict";n(594)},735:function(t,e,n){var r=n(27)(!1);r.push([t.i,'.map-container[data-v-635b4a10]{position:relative;width:100%;height:100vh;max-height:calc(100vh - 56px);max-height:calc(var(--vh, 1vh)*100 - 56px)}.map-container .line-chart[data-v-635b4a10]{position:absolute;top:40px;bottom:0;right:0;left:0;margin:auto}.map-container .map-top[data-v-635b4a10]{position:absolute;z-index:1}.map-container .dot[data-v-635b4a10]{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:9px;height:9px;border-radius:50%;background-color:red;opacity:.4;transition:all 2s}.map-container #map[data-v-635b4a10]{width:100%;height:100%;position:relative;transition:all .5s;max-height:100vh}.map-container .show-line[data-v-635b4a10]{opacity:.4}.map-container #overview-wrapper[data-v-635b4a10]{position:absolute;width:30%;bottom:50px;left:15px;box-shadow:0 2px 6px rgba(0,0,0,.7)}.map-container #overview-wrapper #overview-container[data-v-635b4a10]{position:relative;width:100%}.map-container #overview-wrapper #overview-container #overview[data-v-635b4a10]{position:absolute;top:0;left:0;width:100%;height:100%}.map-container #overview-wrapper #overview-container[data-v-635b4a10]:before{content:"";display:block;padding-top:56.25%}',""]),t.exports=r},806:function(t,e,n){"use strict";n.r(e);n(12),n(8),n(6),n(18),n(19);var r=n(11),o=n(5),c=n(1),l=(n(31),n(7),n(46),n(30),n(14),n(495),n(496),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(34),n(290),n(37),n(66),n(32),n(58),n(24),n(35),n(44),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(20),n(0)),f=n(106);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=n(513),h=l.a.extend({data:function(){return{station:null,markers:[],otherStaionsMarkers:[],polylines:[]}},computed:m(m({},Object(f.b)("station",["stationInfo","filteredStation"])),{},{filterStation:function(){return this.station=JSON.parse(JSON.stringify(this.filteredStation[0])),delete this.station.lines,this.filteredStation},nearestSpots:function(){var t=this.filterStation.forEach((function(t){v.neighbors(t.geohash)}));return Array.from(new Set(t.flat()))}}),watch:{$route:{handler:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("station/query",t.query);case 2:e.makeMarkers(),e.makePolylines(),e.$mapConfig.resetMarkers(e.markers),e.$mapConfig.resetMarkers([e.otherStaionsMarkers]),console.log(e.filteredStation),e.filteredStation&&e.makeOtherStaionsMarkers(t.query,t.params);case 8:case"end":return n.stop()}}),n)})))()},immediate:!0}},beforeCreate:function(){this.$store.commit("info/stationInfo",null)},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("station/query",t.$route.query),e.next=3,t.setMap();case 3:t.$mapConfig.map.addListener("bounds_changed",(function(){var e=t.$mapConfig.currentBounds(),r=t.$mapConfig.map.getCenter(),o={lat:r.lat(),lng:r.lng()},c=t.$mapConfig.map.getZoom();null!==n&&clearTimeout(n),n=setTimeout((function(){t.$store.dispatch("station/getCity",{mapCenter:o,zoom:c}),t.$store.dispatch("station/getCurrentBounds",e)}),250)})),t.$mapConfig.map.setZoom(15),t.$mapConfig.map.panTo(new google.maps.LatLng(t.filterStation[0].lat,t.filterStation[0].lng));case 6:case"end":return e.stop()}}),e)})))()},methods:{setMap:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.$refs.map,t.$mapConfig.makeMap(n),t.$mapConfig.placesService(),t.makeMarkers(),t.makePolylines();case 5:case"end":return e.stop()}}),e)})))()},makeMarkers:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$mapConfig.makeMarkers([{stations:t.filterStation}],"stations",t.onClickMarker);case 2:t.markers=e.sent;case 3:case"end":return e.stop()}}),e)})))()},makeOtherStaionsMarkers:function(t,e){var n,o=this;if("line_id"in t){var c,l=t.line_id.split(",");n=(c=[]).concat.apply(c,Object(r.a)(this.filteredStation[0].lines.map((function(line){if(l.includes(String(line.id)))return line}))))}else{var f;n=(f=[]).concat.apply(f,Object(r.a)(this.filteredStation.map((function(t){return t.lines}))))}var d=n.map((function(line){return line.stations}));if(0!==d.length){var m,v=(m=[]).concat.apply(m,Object(r.a)(d)),map=new Map(v.map((function(t){return[null==t?void 0:t.id,t]}))),h=Array.from(map.values());this.otherStaionsMarkers=h.map((function(t){if(e.name!==(null==t?void 0:t.name)){var marker=o.$mapConfig.makeMarkerWithLabel(t,"",null==t?void 0:t.name);return marker.addListener("click",(function(e){o.$router.push({name:"station-name",params:{name:t.name}})})),marker}}))}},makePolylines:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$mapConfig.resetPolyline(t.polylines),t.polylines=t.filterStation.map((function(e){return e.lines.map((function(line){var polyline=t.$mapConfig.makePolyline(line);return polyline.addListener("click",(function(){"line_id"in t.$route.query?t.$router.push({name:"station-name",params:{name:e.name},query:{company_id:String(e.company_id)}}):t.$router.push({name:"station-name",params:{name:e.name},query:{company_id:String(e.company_id),line_id:String(line.id)}})})),polyline}))})),t.polylines=Array.from(new Set(t.polylines.flat()));case 3:case"end":return e.stop()}}),e)})))()},onClickMarker:function(marker,t){var e=this,n=new google.maps.LatLng(t.lat,t.lng),r=new google.maps.InfoWindow({content:" ",position:n});r.setContent('<div>\n                  <h4 style="color: black">'.concat(t.company.name,'</h4>\n                  <h2 style="color: black">').concat(t.name,'</h2>\n                    <a id="line" style="position: relative;display: inline-block;font-weight: bold;padding: 0.25em 0.5em;text-decoration: none;color: #00BCD4;background-color: #ECECEC;transition: .4s;"><i class="fa fa-caret-right"></i> 全路線表示</a>\n                    <a id="station-detail" style="position: relative;display: inline-block;font-weight: bold;padding: 0.25em 0.5em;text-decoration: none;color: #00BCD4;background-color: #ECECEC;transition: .4s;">詳細</a>\n                  </div>')),r.addListener("domready",(function(){var n,r;null===(n=document.getElementById("line"))||void 0===n||n.addEventListener("click",(function(){e.$router.push({name:"station-name",params:{name:t.name}})})),null===(r=document.getElementById("station-detail"))||void 0===r||r.addEventListener("click",(function(){e.$router.push({name:"station-name-detail-company_id",params:{name:t.name,company_id:String(e.$route.query.company_id)}})}))})),marker.addListener("click",(function(n){google.maps.event.addListenerOnce(e.$mapConfig.map,"click",(function(t){r.close()})),"company_id"in e.$route.query?(r.close(),r.open(e.$mapConfig.map,marker)):e.$router.push({name:"station-name",params:{name:t.name},query:{company_id:String(t.company_id)}})}))}}}),y=(n(734),n(71)),component=Object(y.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-container"},[e("div",{ref:"map",attrs:{id:"map"}})])}),[],!1,null,"635b4a10",null);e.default=component.exports}}]);